"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ErrorMessages;
(function (ErrorMessages) {
    ErrorMessages["INVALID_TYPE"] = "field type is invalid";
    ErrorMessages["NOT_ARRAY"] = "field is not an array";
    ErrorMessages["ILLEGAL"] = "field should not contain illegal character";
})(ErrorMessages || (ErrorMessages = {}));
function ruleOfField(_, value) {
    function validateField(name) {
        if (/[\.\$]/.test(name)) {
            return ErrorMessages.ILLEGAL;
        }
    }
    if (Array.isArray(value)) {
        return undefined;
    }
    if (typeof value === 'string') {
        return validateField(value);
    }
    let result = null;
    for (const key of Object.keys(value)) {
        result = validateField(key);
        if (typeof result === 'string') {
            return result;
        }
        if (typeof value[key] === 'object') {
            return ruleOfField(_, value[key]);
        }
    }
    if (result === null) {
        return ErrorMessages.INVALID_TYPE;
    }
}
function ruleOfFields(_, value) {
    if (!Array.isArray(value)) {
        return ErrorMessages.NOT_ARRAY;
    }
    let err;
    let i = 0;
    while (!err && i < value.length) {
        err = ruleOfField(null, value[i]);
        i++;
    }
    return err;
}
const rules = {
    ruleOfField,
    ruleOfFields,
};
exports.rules = rules;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVsZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbW9uZ28vdXRpbHMvcnVsZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFLLGFBSUo7QUFKRCxXQUFLLGFBQWE7SUFDaEIsdURBQXNDLENBQUE7SUFDdEMsb0RBQW1DLENBQUE7SUFDbkMsdUVBQXNELENBQUE7QUFDeEQsQ0FBQyxFQUpJLGFBQWEsS0FBYixhQUFhLFFBSWpCO0FBUUQsU0FBUyxXQUFXLENBQUMsQ0FBQyxFQUFFLEtBQUs7SUFDM0IsU0FBUyxhQUFhLENBQUMsSUFBWTtRQUNqQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdkIsT0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDO1NBQzlCO0lBQ0gsQ0FBQztJQUVELElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUN4QixPQUFPLFNBQVMsQ0FBQztLQUNsQjtJQUNELElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxFQUFFO1FBQzdCLE9BQU8sYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQzdCO0lBRUQsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDO0lBQ2xCLEtBQUssTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUNwQyxNQUFNLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTVCLElBQUksT0FBTyxNQUFNLEtBQUssUUFBUSxFQUFFO1lBQzlCLE9BQU8sTUFBTSxDQUFDO1NBQ2Y7UUFDRCxJQUFJLE9BQU8sS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLFFBQVEsRUFBRTtZQUNsQyxPQUFPLFdBQVcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDbkM7S0FDRjtJQUVELElBQUksTUFBTSxLQUFLLElBQUksRUFBRTtRQUNuQixPQUFPLGFBQWEsQ0FBQyxZQUFZLENBQUM7S0FDbkM7QUFDSCxDQUFDO0FBUUQsU0FBUyxZQUFZLENBQUMsQ0FBQyxFQUFFLEtBQUs7SUFDNUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDekIsT0FBTyxhQUFhLENBQUMsU0FBUyxDQUFDO0tBQ2hDO0lBRUQsSUFBSSxHQUFHLENBQUM7SUFDUixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDVixPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFO1FBQy9CLEdBQUcsR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLENBQUMsRUFBRSxDQUFDO0tBQ0w7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxNQUFNLEtBQUssR0FBRztJQUNaLFdBQVc7SUFDWCxZQUFZO0NBQ2IsQ0FBQztBQUVPLHNCQUFLIn0=